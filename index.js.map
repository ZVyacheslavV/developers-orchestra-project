{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/constants.js","../src/js/helpers.js","../src/js/header.js","../src/js/artists-api.js","../src/js/animations.js","../src/js/artists-additional.js","../src/js/artists.js","../src/js/feedback.js","../src/js/artist-details-modal.js","../src/js/feedback-modal.js","../src/js/button-up.js"],"sourcesContent":["/* Refs */\nexport const refs = {\n  feedbacksContainer: document.querySelector('.feedbacks-container'),\n  artistsList: document.querySelector('#artists-list'),\n  artistDetailsModal: document.querySelector('.artist-details-modal'),\n  artistDetailsModalCloseBtn: document.querySelector(\n    '.artist-details-modal-close-btn'\n  ),\n  menuGenres: document.querySelector('.dropdown-menu-genres'),\n  menuSort: document.querySelector('.dropdown-menu-sort'),\n  panelSearch: document.querySelector('.filters-content'),\n  btnGenres: document.querySelector('.dropdown-toggle-genres'),\n  btnSort: document.querySelector('.dropdown-toggle-sort'),\n  loader: document.querySelector('.loader'),\n  btnSearch: document.querySelector('.search-and-filters-toggle'),\n  searchInput: document.querySelector('.search-input'),\n  searchBtnRequest: document.querySelector('.search-btn'),\n  iconSearch: document.querySelector('.dropdown-icon-search'),\n  iconSort: document.querySelector('.sort-icon'),\n  iconGenres: document.querySelector('.genres-icon'),\n  loaderArtistsWrapper: document.querySelector('.artists-loader-container'),\n  toggleBtn: document.querySelector('.header-toggle'),\n  mobileMenu: document.querySelector('.header-mobile-menu'),\n  menuLinks: document.querySelectorAll('.header-mob-nav-link'),\n  artistDetailsModalBackdrope: document.querySelector(\n    '.artist-details-backdrop'\n  ),\n  heroBtn: document.querySelector('.hero-btn'),\n  resetBtn: document.querySelector('.filters-reset-btn'),\n\n  feedbackLoader: document.querySelector('.feedback-loader'),\n  feedbackLoaderContainer: document.querySelector('.feedback-loader-container'),\n};\n","/* Constants */\nexport const BASE_URL = 'https://sound-wave.b.goit.study/api';\nexport const API_ENDPOINTS = {\n  ARTISTS: '/artists',\n  ARTIST_BY_ID: '/artists/',\n  ARTIST_ALBUMS_BY_ID: '/albums',\n\n  GENRES: '/genres',\n\n  FEEDBACKS: '/feedbacks',\n  PRODUCTS_BY_CATEGORY: '/products/category/',\n};\nexport const ARTISTS_PER_PAGE = 8;\nexport const FEEDBACKS_PER_QUEUE = 10;\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { refs } from './refs';\n\n//!======================================================\n\n/* Helpers */\nexport function toastError(\n  message = 'Something went wrong. Please try again later.',\n  position = 'topCenter'\n) {\n  iziToast.error({\n    title: '',\n    message,\n    position,\n    timeout: 3000,\n    progressBar: false,\n  });\n}\n\nexport function toastSuccess(\n  message = 'Thank you! Your feedback means a lot to us.',\n  position = 'topCenter',\n  icon = 'ico-success'\n) {\n  iziToast.success({\n    title: '',\n    message,\n    position,\n    timeout: 3000,\n    progressBar: false,\n    icon,\n  });\n}\n\nexport function toastErrorFeedbacks(\n  message = 'We couldn’t load the reviews. Please try again later.',\n  position = 'topRight'\n) {\n  iziToast.error({\n    title: '',\n    message,\n    position,\n    timeout: 3000,\n    progressBar: false,\n  });\n}\n\nexport function toastSuccessFeedbacks(\n  message = 'Thank you! Your feedback means a lot to us.',\n  position = 'topRight'\n) {\n  iziToast.success({\n    title: '',\n    message,\n    position,\n    timeout: 3000,\n    progressBar: false,\n  });\n}\n\n//!======================================================\n\nexport function hideLoaderArtists() {\n  refs.loaderArtistsWrapper.classList.add('hidden');\n}\n\nexport function showLoaderArtists() {\n  refs.loaderArtistsWrapper.classList.remove('hidden');\n}\n\n//!======================================================\n\nexport function hideLoaderFeedback() {\n  refs.feedbackLoader?.classList.add('hidden');\n  refs.feedbackLoaderContainer?.classList.add('hidden');\n\n  refs.feedbackLoaderContainer?.setAttribute('aria-hidden', 'true');\n  refs.feedbackLoader?.setAttribute('aria-hidden', 'true');\n}\n\nexport function showLoaderFeedback() {\n  refs.feedbackLoaderContainer?.classList.remove('hidden');\n  refs.feedbackLoader?.classList.remove('hidden');\n\n  refs.feedbackLoaderContainer?.setAttribute('aria-hidden', 'false');\n  refs.feedbackLoader?.setAttribute('aria-hidden', 'false');\n}\n\n//!======================================================\n","import { refs } from './refs.js';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const { toggleBtn, mobileMenu, menuLinks } = refs;\n\n  function openMenu() {\n    mobileMenu.classList.add('active');\n    toggleBtn.classList.add('active');\n  }\n\n  function closeMenu() {\n    mobileMenu.classList.remove('active');\n    toggleBtn.classList.remove('active');\n  }\n\n  toggleBtn?.addEventListener('click', () => {\n    if (mobileMenu.classList.contains('active')) {\n      closeMenu();\n    } else {\n      openMenu();\n    }\n  });\n\n  menuLinks?.forEach(link => link.addEventListener('click', closeMenu));\n});\n","/* Backend api */\nimport axios from 'axios';\nimport {\n  API_ENDPOINTS,\n  ARTISTS_PER_PAGE,\n  BASE_URL,\n  FEEDBACKS_PER_QUEUE,\n} from './constants';\n\naxios.defaults.baseURL = BASE_URL;\n\nexport const getArtists = async page => {\n  const { data } = await axios.get(\n    `${API_ENDPOINTS.ARTISTS}?limit=${ARTISTS_PER_PAGE}&page=${page}`\n  );\n  return data;\n};\n\nexport const getArtistById = async id => {\n  const { data } = await axios.get(`${API_ENDPOINTS.ARTIST_BY_ID}${id}`);\n  return data;\n};\n\nexport const getArtistAlbumsById = async id => {\n  const { data } = await axios.get(\n    `${API_ENDPOINTS.ARTIST_BY_ID}${id}${API_ENDPOINTS.ARTIST_ALBUMS_BY_ID}`\n  );\n  return data;\n};\n\nexport const getFeedbacks = async (page = 1) => {\n  const { data } = await axios.get(\n    `${API_ENDPOINTS.FEEDBACKS}?limit=${FEEDBACKS_PER_QUEUE}&page=${page}`\n  );\n  return data;\n};\n\nexport const getGenres = async () => {\n  const { data } = await axios.get(`${API_ENDPOINTS.GENRES}`);\n  return data;\n};\n\nexport const searchArtist = async ({\n  name,\n  page = 1,\n  sorted = '0',\n  genre = '',\n}) => {\n  const { data } = await axios.get(\n    `${API_ENDPOINTS.ARTISTS}?limit=${ARTISTS_PER_PAGE}&page=${page}${\n      name?.length ? `&name=${name}` : ''\n    }${\n      sorted === '2' ? `&sortName=desc` : sorted === '1' ? `&sortName=asc` : ''\n    }${genre ? `&genre=${genre}` : ''}`\n  );\n  return data;\n};\n\nexport const addNewFeedback = async (name, rating, descr /* , closeFunc */) => {\n  await axios.post(`${API_ENDPOINTS.FEEDBACKS}`, {\n    name,\n    rating,\n    descr,\n  });\n};\n","import { gsap } from 'gsap';\nimport { refs } from './refs';\n\nexport const timeLines = {\n  tlOpenSearch: !window.matchMedia('(min-width: 1440px)').matches\n    ? gsap\n        .timeline({ paused: true })\n        .to(\n          refs.iconSearch,\n          { rotate: 180, duration: 0.35, ease: 'power2.out' },\n          0\n        )\n        .fromTo(\n          refs.panelSearch,\n          { opacity: 0, y: -10, pointerEvents: 'none' },\n          {\n            opacity: 1,\n            y: 0,\n            duration: 0.4,\n            pointerEvents: 'auto',\n            ease: 'power3.out',\n          },\n          0\n        )\n        .from(\n          refs.panelSearch.children,\n          {\n            opacity: 0,\n            y: -6,\n            stagger: 0.05,\n            duration: 0.25,\n            ease: 'power2.out',\n          },\n          0.1\n        )\n    : null,\n\n  tlCloseSearch: !window.matchMedia('(min-width: 1440px)').matches\n    ? gsap\n        .timeline({ paused: true })\n        .to(refs.iconSearch, { rotate: 0, duration: 0.3, ease: 'power2.in' }, 0)\n        .to(\n          refs.panelSearch,\n          {\n            opacity: 0,\n            y: -10,\n            duration: 0.3,\n            pointerEvents: 'none',\n            ease: 'power2.in',\n          },\n          0\n        )\n    : null,\n\n  tlOpenSort: gsap\n    .timeline({ paused: true })\n    .to(refs.iconSort, { rotate: 180, duration: 0.35, ease: 'power2.out' }, 0)\n    .fromTo(\n      refs.menuSort,\n      { opacity: 0, y: -10, pointerEvents: 'none' },\n      {\n        opacity: 1,\n        y: 0,\n        duration: 0.4,\n        pointerEvents: 'auto',\n        ease: 'power3.out',\n      },\n      0\n    )\n    .from(\n      refs.menuSort.children,\n      {\n        opacity: 0,\n        y: -6,\n        stagger: 0.05,\n        duration: 0.25,\n        ease: 'power2.out',\n      },\n      0.1\n    ),\n\n  tlCloseSort: gsap\n    .timeline({ paused: true })\n    .to(refs.iconSort, { rotate: 0, duration: 0.3, ease: 'power2.in' }, 0)\n    .to(\n      refs.menuSort,\n      {\n        opacity: 0,\n        y: -10,\n        duration: 0.3,\n        pointerEvents: 'none',\n        ease: 'power2.in',\n      },\n      0\n    ),\n\n  tlOpenGenres: gsap\n    .timeline({ paused: true })\n    .to(refs.iconGenres, { rotate: 180, duration: 0.35, ease: 'power2.out' }, 0)\n    .fromTo(\n      refs.menuGenres,\n      { opacity: 0, y: -10, pointerEvents: 'none' },\n      {\n        opacity: 1,\n        y: 0,\n        duration: 0.4,\n        pointerEvents: 'auto',\n        ease: 'power3.out',\n      },\n      0\n    )\n    .from(\n      refs.menuGenres.children,\n      {\n        opacity: 0,\n        y: -6,\n        stagger: 0.05,\n        duration: 0.25,\n        ease: 'power2.out',\n      },\n      0.1\n    ),\n\n  tlCloseGenres: gsap\n    .timeline({ paused: true })\n    .to(refs.iconGenres, { rotate: 0, duration: 0.3, ease: 'power2.in' }, 0)\n    .to(\n      refs.menuGenres,\n      {\n        opacity: 0,\n        y: -10,\n        duration: 0.3,\n        pointerEvents: 'none',\n        ease: 'power2.in',\n      },\n      0\n    ),\n};\n\ntimeLines.tlOpenSort.eventCallback('onStart', () => {\n  timeLines.tlCloseSort?.pause(0).progress(0);\n});\ntimeLines.tlCloseSort.eventCallback('onStart', () => {\n  timeLines.tlOpenSort?.pause(0).progress(0);\n});\n","/* Artists additional */\nimport { timeLines } from './animations.js';\nimport { getArtists, getGenres, searchArtist } from './artists-api';\nimport { loadArtists, renderArtists } from './artists.js';\nimport {\n  hideLoaderArtists,\n  showLoaderArtists,\n  toastError,\n  toastSuccess,\n  toastSuccessFeedbacks,\n} from './helpers';\nimport { refs } from './refs.js';\nimport { gsap } from 'gsap';\n\nexport let query = { name: '', page: 1, sorted: 0, genre: '' };\n\n// const allDropdowns = [];\n\n//Inits:\ninitGenresMarkup();\n\ninitSearchAndFilters();\n\ninitSearchRequest();\n\ninitSort();\n\ninitGenres();\n\ninitReset();\n\nexecHeroBtnClick();\n\nhelpClearHoverOnButtons();\n\n//Functions:\nfunction initSearchRequest() {\n  refs.searchInput.addEventListener('input', () => {\n    query.name = refs.searchInput.value.trim();\n  });\n\n  const handleSearchBtnRequest = async () => {\n    if (!query.name?.length) {\n      toastSuccess('Silence from you', 'topCenter', null);\n      return;\n    }\n    showLoaderArtists();\n\n    try {\n      const { artists } = await searchArtist(query);\n      refs.artistsList.innerHTML = '';\n      renderArtists(artists);\n    } catch (err) {\n      toastError(`Silence due problem ${err}`);\n    }\n\n    hideLoaderArtists();\n    if (!window.matchMedia('(min-width: 1440px)'))\n      timeLines.tlCloseSearch.play(0);\n  };\n\n  refs.searchBtnRequest.addEventListener('click', handleSearchBtnRequest);\n\n  refs.searchInput.addEventListener('keydown', e => {\n    if (e.key === 'Enter') {\n      handleSearchBtnRequest();\n    }\n  });\n}\n\nasync function initGenresMarkup() {\n  try {\n    const genres = await getGenres();\n    const markup =\n      '<li data-value=\"all\">All Genres</li>' +\n      genres\n        .map(({ genre }) => `<li data-value=\"${genre}\">${genre}</li>`)\n        .join('');\n    refs.menuGenres.insertAdjacentHTML('beforeend', markup);\n  } catch (err) {\n    toastError(`While loading genres ${err}`);\n  }\n}\n\nfunction initDropdown({ btn, menu, wrapperSelector }) {\n  const icon = btn.querySelector('.dropdown-icon');\n  const tlOpen = gsap.timeline({ paused: true });\n  const tlClose = gsap.timeline({ paused: true });\n\n  const outsideClickHandler = e => {\n    if (!document.querySelector(wrapperSelector).contains(e.target)) {\n      tlClose.restart();\n      btn.classList.remove('open');\n      menu.classList.remove('open');\n      // document.body.classList.remove('no-scroll');\n    }\n  };\n\n  tlOpen\n    .to(icon, { rotate: 180, duration: 0.35, ease: 'power2.out' }, 0)\n    .fromTo(\n      menu,\n      { opacity: 0, y: -10, pointerEvents: 'none' },\n      {\n        opacity: 1,\n        y: 0,\n        duration: 0.4,\n        pointerEvents: 'auto',\n        ease: 'power3.out',\n      },\n      0\n    )\n    .from(\n      menu.children,\n      {\n        opacity: 0,\n        y: -6,\n        stagger: 0.05,\n        duration: 0.25,\n        ease: 'power2.out',\n      },\n      0.1\n    );\n\n  tlClose.to(icon, { rotate: 0, duration: 0.3, ease: 'power2.in' }, 0).to(\n    menu,\n    {\n      opacity: 0,\n      y: -10,\n      duration: 0.3,\n      pointerEvents: 'none',\n      ease: 'power2.in',\n    },\n    0\n  );\n\n  btn.addEventListener('click', e => {\n    e.stopPropagation();\n    const isOpen = menu.classList.contains('open');\n\n    // Closing others:\n    if (!isOpen) {\n      allDropdowns.forEach(d => {\n        if (d.menu !== menu) {\n          d.tlOpen.pause(0);\n          d.tlClose.restart();\n          d.btn.classList.remove('open');\n          d.menu.classList.remove('open');\n        }\n      });\n\n      tlClose.pause(0);\n      tlOpen.restart();\n      btn.classList.add('open');\n      menu.classList.add('open');\n      document.addEventListener('click', outsideClickHandler, { once: true });\n      // document.body.classList.add('no-scroll');\n    } else {\n      tlOpen.pause(0);\n      tlClose.restart();\n      btn.classList.remove('open');\n      menu.classList.remove('open');\n      // document.body.classList.remove('no-scroll');\n    }\n  });\n\n  menu.addEventListener('click', e => {\n    const item = e.target.closest('li');\n    if (!item) return;\n\n    btn.querySelector('.dropdown-label').textContent = item.textContent;\n    btn.dataset.value = item.dataset.value;\n\n    tlOpen.pause(0);\n    tlClose.restart();\n    btn.classList.remove('open');\n    menu.classList.remove('open');\n    // document.body.classList.remove('no-scroll');\n  });\n\n  // Saving for closing others in future:\n  allDropdowns.push({ btn, menu, tlOpen, tlClose });\n}\n\n//================================================================\n/* == Init Sort, Init Genres functions == */\nfunction initSort() {\n  const outsideClickHandler = e => {\n    if (!document.querySelector('.artists-dropdown-sort').contains(e.target)) {\n      timeLines.tlCloseSort.restart();\n      timeLines.tlCloseGenres.restart(); //try\n      refs.btnSort.classList.remove('open');\n      refs.menuSort.classList.remove('open');\n      // document.body.classList.remove('no-scroll');\n    }\n  };\n\n  refs.btnSort.addEventListener('click', e => {\n    e.stopPropagation();\n    const isOpen = refs.menuSort.classList.contains('open');\n\n    if (!isOpen) {\n      //Closing genres\n      timeLines.tlOpenGenres.pause(0);\n      timeLines.tlCloseGenres.restart();\n      refs.btnGenres.classList.remove('open');\n      refs.menuGenres.classList.remove('open');\n\n      timeLines.tlCloseSort.pause(0);\n      timeLines.tlOpenSort.restart();\n      refs.btnSort.classList.add('open');\n      refs.menuSort.classList.add('open');\n      document.addEventListener('click', outsideClickHandler, { once: true });\n      // document.body.classList.add('no-scroll');\n    } else {\n      timeLines.tlOpenSort.pause(0);\n      timeLines.tlCloseSort.restart();\n      refs.btnSort.classList.remove('open');\n      refs.menuSort.classList.remove('open');\n      // document.body.classList.remove('no-scroll');\n    }\n  });\n\n  refs.menuSort.addEventListener('click', async e => {\n    const item = e.target.closest('li');\n    if (!item) return;\n\n    refs.btnSort.querySelector('.dropdown-label').textContent =\n      item.textContent;\n    refs.btnSort.dataset.value = item.dataset.value;\n\n    query.sorted = item.dataset.value;\n\n    showLoaderArtists();\n    try {\n      const { artists } = await searchArtist(query);\n      refs.artistsList.innerHTML = '';\n      renderArtists(artists);\n    } catch (err) {\n      toastError(`Silence due problem ${err}`);\n    }\n    hideLoaderArtists();\n\n    timeLines.tlOpenSort.pause(0);\n    timeLines.tlCloseSort.restart();\n    refs.btnSort.classList.remove('open');\n    refs.menuSort.classList.remove('open');\n    // document.body.classList.remove('no-scroll');\n  });\n\n  // Saving for closing others in future:\n  // allDropdowns.push({ btn, menu, tlOpen, tlClose });\n}\n\nasync function initGenres() {\n  const outsideClickHandler = e => {\n    if (\n      !document.querySelector('.artists-dropdown-genres').contains(e.target)\n    ) {\n      timeLines.tlCloseGenres.restart();\n      timeLines.tlCloseSort.restart(); //try\n      refs.btnGenres.classList.remove('open');\n      refs.menuGenres.classList.remove('open');\n      // document.body.classList.remove('no-scroll');\n    }\n  };\n\n  refs.btnGenres.addEventListener('click', e => {\n    e.stopPropagation();\n    const isOpen = refs.menuGenres.classList.contains('open');\n\n    if (!isOpen) {\n      //Closing sort\n      timeLines.tlOpenSort.pause(0);\n      timeLines.tlCloseSort.restart();\n      refs.btnSort.classList.remove('open');\n      refs.menuSort.classList.remove('open');\n\n      timeLines.tlCloseGenres.pause(0);\n      timeLines.tlOpenGenres.restart();\n      refs.btnGenres.classList.add('open');\n      refs.menuGenres.classList.add('open');\n      document.addEventListener('click', outsideClickHandler, { once: true });\n      // document.body.classList.add('no-scroll');\n    } else {\n      timeLines.tlOpenGenres.pause(0);\n      timeLines.tlCloseGenres.restart();\n      refs.btnGenres.classList.remove('open');\n      refs.menuGenres.classList.remove('open');\n      // document.body.classList.remove('no-scroll');\n    }\n  });\n\n  refs.menuGenres.addEventListener('click', async e => {\n    const item = e.target.closest('li');\n    if (!item) return;\n\n    refs.btnGenres.querySelector('.dropdown-label').textContent =\n      item.textContent;\n    refs.btnGenres.dataset.value = item.dataset.value;\n\n    query.genre = item.textContent === 'All Genres' ? '' : item.textContent;\n\n    showLoaderArtists();\n    try {\n      const { artists } = await searchArtist(query);\n      refs.artistsList.innerHTML = '';\n      renderArtists(artists);\n    } catch (err) {\n      toastError(`Silence due problem ${err}`);\n    }\n    hideLoaderArtists();\n\n    timeLines.tlOpenGenres.pause(0);\n    timeLines.tlCloseGenres.restart();\n    refs.btnGenres.classList.remove('open');\n    refs.menuGenres.classList.remove('open');\n    // document.body.classList.remove('no-scroll');\n  });\n\n  // Saving for closing others in future:\n  // allDropdowns.push({ btn, menu, tlOpen, tlClose });\n}\n\n//================================================================\n\nfunction initSearchAndFilters() {\n  // no initialization of animation\n  if (window.matchMedia('(min-width: 1440px)').matches) {\n    return;\n  }\n\n  const outsideClickHandler = e => {\n    if (!document.querySelector('.filters-content').contains(e.target)) {\n      timeLines.tlCloseSearch.play(0);\n      document.removeEventListener('click', outsideClickHandler);\n    }\n    // refs.btnSearch.classList.remove('open');\n    // refs.panelSearch.classList.remove('open');\n  };\n\n  refs.btnSearch.addEventListener('click', e => {\n    e.stopPropagation();\n    const isOpenSearch =\n      gsap.isTweening(refs.panelSearch) ||\n      refs.panelSearch.style.pointerEvents === 'auto';\n\n    if (!isOpenSearch) {\n      timeLines.tlCloseSearch.pause(0);\n      timeLines.tlOpenSearch.restart();\n      document.addEventListener('click', outsideClickHandler);\n      // refs.btnSearch.classList.add('open');\n      // refs.panelSearch.classList.add('open');\n    } else {\n      timeLines.tlOpenSearch.pause(0);\n      timeLines.tlCloseSearch.restart();\n      document.removeEventListener('click', outsideClickHandler);\n      // refs.btnSearch.classList.remove('open');\n      // refs.panelSearch.classList.remove('open');\n    }\n  });\n\n  /* refs.panelSearch.addEventListener('click', e => {\n    refs.btnSearch.classList.remove('open');\n    refs.panelSearch.classList.remove('open');\n    const item = e.target.closest('li');\n    if (!item) return;\n\n    refs.btnSearch.querySelector('.dropdown-label').textContent =\n      item.textContent;\n    refs.btnSearch.dataset.value = item.dataset.value;\n\n    tlOpen.pause(0);\n    tlClose.restart();\n    document.removeEventListener('click', outsideClickHandler);\n  }); */\n}\n\nexport async function handleResetQuery() {\n  query = { name: '', page: 1, sorted: 0, genre: '' };\n  refs.btnGenres.querySelector('.dropdown-label').textContent = 'Genre';\n  refs.btnSort.querySelector('.dropdown-label').textContent = 'Sorting';\n  refs.searchInput.value = '';\n\n  showLoaderArtists();\n  try {\n    refs.artistsList.innerHTML = '';\n    // loadArtists();\n    const { artists } = await searchArtist(query);\n    renderArtists(artists);\n  } catch (err) {\n    toastError(`Silence due problem ${err}`);\n  }\n  hideLoaderArtists();\n\n  timeLines.tlCloseGenres.play(0);\n  timeLines.tlCloseSort.play(0);\n}\n\nfunction initReset() {\n  refs.resetBtn.addEventListener('click', handleResetQuery);\n}\n\nfunction execHeroBtnClick() {\n  refs.heroBtn.addEventListener('click', e => {\n    e.preventDefault();\n    document.querySelector('#artists').scrollIntoView({ behavior: 'smooth' });\n  });\n}\n\nfunction helpClearHoverOnButtons() {\n  document.querySelectorAll('button').forEach(btn => {\n    btn.addEventListener('click', () => {\n      btn.blur(); // знімає focus після кліку\n    });\n  });\n}\n\n/* async function searching() {\n  try {\n    const { artists } = await searchArtist(query);\n    refs.artistsList.innerHTML = '';\n    renderArtists(artists);\n  } catch (err) {\n    toastError(`Silence due problem ${err}`);\n  }\n  return artists;\n} */\n\n/* == Universal function for sort-genres dropdowns with array == */\n/* function initDropdown({ btn, menu, wrapperSelector }) {\n  const icon = btn.querySelector('.dropdown-icon');\n  const tlOpen = gsap.timeline({ paused: true });\n  const tlClose = gsap.timeline({ paused: true });\n\n  const outsideClickHandler = e => {\n    if (!document.querySelector(wrapperSelector).contains(e.target)) {\n      tlClose.restart();\n      btn.classList.remove('open');\n      menu.classList.remove('open');\n      // document.body.classList.remove('no-scroll');\n    }\n  };\n\n  tlOpen\n    .to(icon, { rotate: 180, duration: 0.35, ease: 'power2.out' }, 0)\n    .fromTo(\n      menu,\n      { opacity: 0, y: -10, pointerEvents: 'none' },\n      {\n        opacity: 1,\n        y: 0,\n        duration: 0.4,\n        pointerEvents: 'auto',\n        ease: 'power3.out',\n      },\n      0\n    )\n    .from(\n      menu.children,\n      {\n        opacity: 0,\n        y: -6,\n        stagger: 0.05,\n        duration: 0.25,\n        ease: 'power2.out',\n      },\n      0.1\n    );\n\n  tlClose.to(icon, { rotate: 0, duration: 0.3, ease: 'power2.in' }, 0).to(\n    menu,\n    {\n      opacity: 0,\n      y: -10,\n      duration: 0.3,\n      pointerEvents: 'none',\n      ease: 'power2.in',\n    },\n    0\n  );\n\n  btn.addEventListener('click', e => {\n    e.stopPropagation();\n    const isOpen = menu.classList.contains('open');\n\n    // Closing others:\n    if (!isOpen) {\n      allDropdowns.forEach(d => {\n        if (d.menu !== menu) {\n          d.tlOpen.pause(0);\n          d.tlClose.pause(0).play(0);\n          d.btn.classList.remove('open');\n          d.menu.classList.remove('open');\n        }\n      });\n\n      tlClose.pause(0);\n      tlOpen.pause(0).play(0);\n      btn.classList.add('open');\n      menu.classList.add('open');\n      document.addEventListener('click', outsideClickHandler, { once: true });\n      // document.body.classList.add('no-scroll');\n    } else {\n      tlOpen.pause(0);\n      tlClose.pause(0).play(0);\n      btn.classList.remove('open');\n      menu.classList.remove('open');\n      // document.body.classList.remove('no-scroll');\n    }\n  });\n\n  menu.addEventListener('click', e => {\n    const item = e.target.closest('li');\n    if (!item) return;\n\n    btn.querySelector('.dropdown-label').textContent = item.textContent;\n    btn.dataset.value = item.dataset.value;\n\n    tlOpen.pause(0);\n    tlClose.restart();\n    btn.classList.remove('open');\n    menu.classList.remove('open');\n    // document.body.classList.remove('no-scroll');\n  });\n\n  // Saving for closing others in future:\n  allDropdowns.push({ btn, menu, tlOpen, tlClose });\n} */\n\n/* initDropdown({\n  btn: refs.btnGenres,\n  menu: refs.menuGenres,\n  wrapperSelector: '.artists-dropdown-genres',\n});\n\ninitDropdown({\n  btn: refs.btnSort,\n  menu: refs.menuSort,\n  wrapperSelector: '.artists-dropdown-sort',\n}); */\n","/*----------- Imports ------------*/\n\nimport Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.css';\nimport '../css/artists.css';\n\nimport { getArtists, searchArtist } from './artists-api.js';\nimport { handleResetQuery, query } from './artists-additional.js';\nimport { refs } from './refs.js';\nimport { toastError, showLoaderArtists, hideLoaderArtists } from './helpers.js';\nimport { ARTISTS_PER_PAGE } from './constants.js';\n\n/*------------ Globals ------------*/\n\nconst isMobile = window.matchMedia('(max-width: 767.98px)').matches;\nconst visiblePages = isMobile ? 3 : 5;\n\nlet pager = null;\nlet inFlight = false;\nlet skipScrollOnce = false;\nlet suppressExternalNormalize = false;\n\n/*------------ Placeholder ----------- */\n\nfunction noArtistsMarkup() {\n  const sprite = new URL('../img/icons.svg', import.meta.url).href;\n  return `\n    <div class=\"no-artists is-hidden\" data-no-artists>\n      <svg class=\"no-artists-icon\" width=\"40\" height=\"40\" aria-hidden=\"true\">\n        <use href=\"${sprite}#icon-error\"></use>\n      </svg>\n      <h2 class=\"no-artists-title\">Silence on the stage…</h2>\n      <p class=\"no-artists-text\">\n        Looks like no artists match your filters.<br />\n        Try changing them or hit “Reset Filters” to bring back the beat.\n      </p>\n      <button class=\"btn-reset-filters\" type=\"button\">Reset filters</button>\n    </div>\n  `;\n}\n\nfunction ensureNoArtistsBlock() {\n  let el = document.querySelector('[data-no-artists]');\n  if (!el) {\n    refs.artistsList.insertAdjacentHTML('afterend', noArtistsMarkup());\n    el = document.querySelector('[data-no-artists]');\n  }\n  return el;\n}\n\nfunction showNoArtists() {\n  ensureNoArtistsBlock().classList.remove('is-hidden');\n  const btn = document.querySelector('.btn-reset-filters');\n  if (btn) {\n    btn.addEventListener('click', handleResetQuery, { once: true });\n  }\n}\nfunction hideNoArtists() {\n  document.querySelector('[data-no-artists]')?.classList.add('is-hidden');\n}\n\n/*--------------- Helpers ---------------*/\n\nfunction togglePager(visible, totalItems = 0) {\n  const box = document.querySelector('#tui-pagination');\n  if (!box) return;\n  box.classList.toggle('hidden', !visible || totalItems <= 0);\n}\n\nfunction isSearchActive() {\n  return Boolean(\n    (query.name && query.name.trim().length) ||\n      (query.genre && query.genre !== 'all' && query.genre !== '') ||\n      (query.sorted && Number(query.sorted) !== 0)\n  );\n}\n\nfunction ensurePager(total = 0) {\n  if (pager) return;\n  pager = new Pagination('#tui-pagination', {\n    totalItems: total,\n    itemsPerPage: ARTISTS_PER_PAGE,\n    page: query.page || 1,\n    visiblePages,\n    centerAlign: true,\n    usageStatistics: false,\n    template: {\n      page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n      currentPage:\n        '<strong class=\"tui-page-btn is-active\" aria-current=\"page\">{{page}}</strong>',\n      moveButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-{{type}}\"><span class=\"tui-ico-{{type}}\"></span></a>',\n      disabledMoveButton:\n        '<span class=\"tui-page-btn is-disabled tui-{{type}}\"><span class=\"tui-ico-{{type}}\"></span></span>',\n      moreButton: '<span class=\"tui-page-btn tui-ellipsis\">…</span>',\n    },\n  });\n\n  pager.on('afterMove', handlePagerMove);\n}\n\nfunction normalizeAndMovePager(total) {\n  if (!pager) return;\n  const totalPages = Math.max(1, Math.ceil(total / ARTISTS_PER_PAGE));\n  const target = Math.min(Math.max(query.page || 1, 1), totalPages);\n\n  if (pager.getCurrentPage() !== target) {\n    skipScrollOnce = true;\n    pager.movePageTo(target);\n  }\n  togglePager(totalPages > 1, total);\n}\n\n/*---------------- loader ------------------*/\n\nexport async function loadArtists({ init = false } = {}) {\n  showLoaderArtists();\n  try {\n    if (init) query.page = 1;\n\n    const usingSearch = isSearchActive();\n    const payload = usingSearch\n      ? await searchArtist(query)\n      : await getArtists(query.page);\n\n    const artists = payload.artists ?? [];\n    const totalArtists = Number(payload.totalArtists) || 0;\n\n    suppressExternalNormalize = true;\n    refs.artistsList.innerHTML = '';\n    renderArtists(artists);\n    suppressExternalNormalize = false;\n\n    ensurePager(totalArtists);\n    pager.setTotalItems(totalArtists);\n    normalizeAndMovePager(totalArtists);\n\n    if (!init) {\n      const totalPages = Math.ceil(totalArtists / ARTISTS_PER_PAGE);\n      togglePager(totalPages > 1, totalArtists);\n      // if (!skipScrollOnce) smartScrollAfterRender();\n    }\n  } catch (e) {\n    if (isSearchActive()) toastError('Failed to fetch artists');\n    refs.artistsList.innerHTML = '';\n    renderArtists([]);\n    togglePager(false, 0);\n  } finally {\n    hideLoaderArtists();\n  }\n}\n\n/*---------------------- Pager ------------------------*/\n\nasync function handlePagerMove({ page: next }) {\n  if (inFlight) return;\n  inFlight = true;\n  showLoaderArtists();\n  try {\n    query.page = next;\n    refs.artistsList.innerHTML = '';\n\n    const usingSearch = isSearchActive();\n    const payload = usingSearch\n      ? await searchArtist(query)\n      : await getArtists(next);\n\n    const nextArtists = payload.artists ?? [];\n    const nextTotal = Number(payload.totalArtists) || 0;\n\n    suppressExternalNormalize = true;\n    renderArtists(nextArtists);\n    suppressExternalNormalize = false;\n\n    pager.setTotalItems(nextTotal);\n    normalizeAndMovePager(nextTotal);\n\n    if (!skipScrollOnce) {\n      smartScrollAfterRender();\n    } else {\n      skipScrollOnce = false;\n    }\n  } catch (e) {\n    toastError('Failed to fetch artists');\n    renderArtists([]);\n    togglePager(false, 0);\n  } finally {\n    inFlight = false;\n    hideLoaderArtists();\n  }\n}\n\n/*---------------- Render --------------------*/\n\nexport function renderArtists(artists = []) {\n  const sprite = new URL('../img/icons.svg', import.meta.url).href;\n\n  if (!Array.isArray(artists) || artists.length === 0) {\n    hideNoArtists();\n    refs.artistsList.innerHTML = '';\n    showNoArtists();\n    pager?.setTotalItems(0);\n    togglePager(false, 0);\n    document.dispatchEvent(new Event('artists:updated'));\n    return;\n  }\n\n  hideNoArtists();\n\n  const markup = artists\n    .map(\n      ({\n        _id,\n        strArtist = 'Unknown',\n        strArtistThumb,\n        strBiographyEN = '',\n        genres = [],\n      }) => {\n        const img =\n          strArtistThumb || 'https://placehold.co/736x414?text=No+Image';\n\n        const tagsHtml =\n          Array.isArray(genres) && genres.length\n            ? `<ul class=\"artist-tags\">${genres\n                .map(g => `<li class=\"tag\">${g}</li>`)\n                .join('')}</ul>`\n            : `<ul class=\"artist-tags\" aria-hidden=\"true\"></ul>`;\n\n        return `\n          <li class=\"artists-item\">\n            <div class=\"artist-card\" data-id=\"${_id}\">\n              <img\n                src=\"${img}\"\n                alt=\"${strArtist} — portrait\"\n                class=\"artist-img\"\n                loading=\"lazy\"\n                decoding=\"async\"\n                width=\"736\" height=\"414\"\n              >\n              ${tagsHtml}\n              <h3 class=\"artist-name\">${strArtist}</h3>\n              ${\n                strBiographyEN\n                  ? `<p class=\"artist-desc text-clamp-3\">${strBiographyEN}</p>`\n                  : ''\n              }\n              <button class=\"artist-cta\" type=\"button\" data-artist-id=\"${_id}\" aria-label=\"Learn more about ${strArtist}\">\n                Learn More\n                <svg class=\"artist-cta-icon\" width=\"24\" height=\"24\" aria-hidden=\"true\">\n                  <use href=\"${sprite}#icon-arrow-1\"></use>\n                </svg>\n              </button>\n            </div>\n          </li>`;\n      }\n    )\n    .join('');\n\n  refs.artistsList.insertAdjacentHTML('beforeend', markup);\n  document.dispatchEvent(new Event('artists:updated'));\n}\n\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', () => {\n    query.page = 1;\n    loadArtists({ init: true });\n  });\n} else {\n  query.page = 1;\n  loadArtists({ init: true });\n}\n\n/*----------------- Scroll -------------------*/\n\nfunction scrollToArtistsTop() {\n  const anchor =\n    document.querySelector('.js-artists-top') ||\n    document.querySelector('#artists');\n  if (!anchor) return;\n\n  let offset = parseFloat(getComputedStyle(anchor).scrollMarginTop) || 0;\n  if (!offset) {\n    offset = window.matchMedia('(min-width:1440px)').matches\n      ? 112\n      : window.matchMedia('(min-width:768px)').matches\n      ? 96\n      : 120;\n  }\n\n  let targetY = Math.round(\n    anchor.getBoundingClientRect().top + window.pageYOffset - offset\n  );\n\n  if (Math.abs(window.pageYOffset - targetY) < 2) {\n    targetY = Math.max(0, targetY - 1);\n  }\n\n  const reduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n\n  window.scrollTo({\n    top: targetY,\n    left: 0,\n    behavior: reduced ? 'auto' : 'smooth',\n  });\n}\n\nfunction scrollAfterImages() {\n  const container = document.querySelector('.artists-list');\n  if (!container) return;\n\n  const images = Array.from(container.querySelectorAll('img'));\n  if (images.length === 0) {\n    scrollToArtistsTop();\n    return;\n  }\n\n  let loaded = 0;\n  const done = () => {\n    loaded++;\n    if (loaded === images.length) scrollToArtistsTop();\n  };\n\n  images.forEach(img => {\n    if (img.complete) {\n      done();\n    } else {\n      img.addEventListener('load', done, { once: true });\n      img.addEventListener('error', done, { once: true });\n    }\n  });\n}\n\nfunction smartScrollAfterRender() {\n  requestAnimationFrame(scrollToArtistsTop);\n\n  scrollAfterImages();\n\n  setTimeout(scrollToArtistsTop, 400);\n}\n\ndocument.addEventListener('artists:updated', async () => {\n  if (refs.artistsList.children.length === 0) return;\n  if (suppressExternalNormalize) return;\n\n  try {\n    ensurePager();\n\n    const usingSearch = isSearchActive();\n    const payload = usingSearch\n      ? await searchArtist({ ...query, page: 1 })\n      : await getArtists(query.page || 1);\n\n    const totalArtists = Number(payload.totalArtists) || 0;\n\n    pager.setTotalItems(totalArtists);\n    normalizeAndMovePager(totalArtists);\n\n    const totalPages = Math.ceil(totalArtists / ARTISTS_PER_PAGE);\n    togglePager(totalPages > 1, totalArtists);\n\n    // scrollAfterImages();\n  } catch {\n    togglePager(false, 0);\n  }\n});\n\n/* ================= Filters animation =============== */\n\nconst FILTERS_STICKY_TOP = 112;\nconst filtersState = {\n  enabled: false,\n  firstTop: 0,\n  lastRowTop: 0,\n  maxShift: 0,\n  rafId: 0,\n};\n\nfunction getColumnsCount(listEl) {\n  const gtc = getComputedStyle(listEl).gridTemplateColumns || '';\n  const cols = gtc.split(' ').filter(Boolean).length;\n  return Math.max(1, cols || 1);\n}\n\nfunction absTop(el) {\n  const r = el.getBoundingClientRect();\n  return Math.round(r.top + window.pageYOffset);\n}\n\nfunction enableFiltersFollow() {\n  if (filtersState.enabled) return;\n  filtersState.enabled = true;\n  onScrollFiltersFollow();\n  window.addEventListener('scroll', scheduleFiltersRaf, { passive: true });\n  window.addEventListener('resize', recomputeFiltersBounds, { passive: true });\n}\n\nfunction disableFiltersFollow() {\n  if (!filtersState.enabled) return;\n  filtersState.enabled = false;\n  window.removeEventListener('scroll', scheduleFiltersRaf);\n  window.removeEventListener('resize', recomputeFiltersBounds);\n  cancelAnimationFrame(filtersState.rafId);\n  document\n    .querySelector('.filters-panel')\n    ?.style.setProperty('--filters-shift', '0px');\n}\n\nfunction scheduleFiltersRaf() {\n  cancelAnimationFrame(filtersState.rafId);\n  filtersState.rafId = requestAnimationFrame(onScrollFiltersFollow);\n}\n\nfunction onScrollFiltersFollow() {\n  if (!filtersState.enabled) return;\n  const panel = document.querySelector('.filters-panel');\n  if (!panel) return;\n\n  const rawShift =\n    window.pageYOffset + FILTERS_STICKY_TOP - filtersState.firstTop;\n  const clamped = Math.round(\n    Math.max(0, Math.min(rawShift, filtersState.maxShift))\n  );\n\n  panel.style.setProperty('--filters-shift', `${clamped}px`);\n}\n\nfunction recomputeFiltersBounds() {\n  if (!window.matchMedia('(min-width:1440px)').matches) {\n    disableFiltersFollow();\n    return;\n  }\n\n  const list = refs.artistsList;\n  const panel = document.querySelector('.filters-panel');\n  if (!list || !panel || list.children.length === 0) {\n    disableFiltersFollow();\n    return;\n  }\n\n  const cols = getColumnsCount(list);\n  const total = list.children.length;\n\n  if (total <= cols) {\n    disableFiltersFollow();\n    return;\n  }\n\n  const firstTop = absTop(list.children[0]);\n\n  const lastRowFirstIndex = total - (total % cols || cols);\n  const lastRowTop = absTop(list.children[lastRowFirstIndex]);\n\n  filtersState.firstTop = firstTop;\n  filtersState.lastRowTop = lastRowTop;\n  filtersState.maxShift = Math.max(0, lastRowTop - firstTop);\n\n  enableFiltersFollow();\n  scheduleFiltersRaf();\n}\n\ndocument.addEventListener('artists:updated', () => {\n  const hasCards = refs.artistsList?.children.length > 0;\n  if (!hasCards) {\n    disableFiltersFollow();\n    return;\n  }\n  requestAnimationFrame(() => {\n    setTimeout(recomputeFiltersBounds, 50);\n  });\n});\n","import Swiper from 'swiper';\nimport 'swiper/css';\nimport 'swiper/css/pagination';\nimport 'swiper/css/navigation';\n\nimport 'css-star-rating/css/star-rating.css';\n\nimport { getFeedbacks } from './artists-api';\nimport { refs } from './refs';\nimport { Pagination, Navigation } from 'swiper/modules';\n\nimport {\n  hideLoaderFeedback,\n  showLoaderFeedback,\n  toastErrorFeedbacks,\n} from './helpers';\n\n// ! ===========================================================================================\n\nconst MAX_STARS = 5;\n\nfunction ratingMarkup(rating) {\n  const cls = ratingClasses(rating);\n  const aria = clamp01to5(rating);\n\n  return `\n    <div class=\"${cls}\" role=\"img\" aria-label=\"Rating ${aria} out of 5\">\n      <div class=\"star-container\">\n        ${renderStars(aria, MAX_STARS)}\n      </div>\n    </div>`;\n}\n\nfunction feedbackTemplate({ descr, name, rating }) {\n  return `\n    <div class=\"swiper-slide feedback-card\">\n      ${ratingMarkup(rating)}\n      <p class=\"feedback-text\">\"${descr}\"</p>\n      <p class=\"feedback-author\">${name}</p>\n    </div>`;\n}\n\nfunction createFeedbacks(feedbacks) {\n  const markup = feedbacks.map(feedbackTemplate).join('');\n  refs.feedbacksContainer.insertAdjacentHTML('beforeend', markup);\n}\n\n// TODO ===================================\n\nfunction clamp01to5(x) {\n  const n = Number(x);\n  return Math.min(5, Math.max(0, Number.isNaN(n) ? 0 : n));\n}\n\nfunction ratingClasses(rating) {\n  const val = clamp01to5(rating);\n  const full = Math.floor(val);\n  const hasHalf = val % 1 >= 0.5;\n  return `rating medium star-icon label-hidden value-${full} ${\n    hasHalf ? 'half' : ''\n  }`;\n}\n\nfunction renderStars(value, maxStars) {\n  const full = Math.floor(value);\n  const hasHalf = value % 1 >= 0.5;\n\n  return Array.from({ length: maxStars }, (_, i) => {\n    if (i < full) return renderStar('full');\n    if (i === full && hasHalf) return renderStar('half');\n    return renderStar('empty');\n  }).join('');\n}\n\nfunction renderStar(type) {\n  return `\n    <div class=\"star\">\n      <span class=\"star-empty\">${starSvg()}</span>\n      <span class=\"star-half\" ${\n        type === 'half' ? '' : 'style=\"display:none\" aria-hidden=\"true\"'\n      }>\n        ${starSvg()}\n      </span>\n      <span class=\"star-filled\" ${\n        type === 'full' ? '' : 'style=\"display:none\" aria-hidden=\"true\"'\n      }>\n        ${starSvg()}\n      </span>\n    </div>`;\n}\n\nfunction starSvg() {\n  return `\n    <svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" aria-hidden=\"true\" focusable=\"false\">\n      <path d=\"M12 .587l3.668 7.431 8.2 1.192-5.934 5.787 \n        1.402 8.173L12 18.897l-7.336 3.86 \n        1.402-8.173L.132 9.21l8.2-1.192z\"></path>\n    </svg>`;\n}\n\n// ! ===========================================================================================\n\nlet swiperInstance = null;\n\nasync function renderFeedbacks() {\n  const section = document.querySelector('#reviews');\n\n  section?.setAttribute('data-state', 'loading');\n  section?.setAttribute('aria-busy', 'true');\n\n  showLoaderFeedback();\n\n  try {\n    if (swiperInstance) return;\n\n    const fontsReady = document.fonts?.ready ?? Promise.resolve();\n    const resp = await getFeedbacks(1);\n    await fontsReady;\n\n    const list = Array.isArray(resp?.data) ? resp.data : [];\n\n    if (!list.length) {\n      renderEmptyState();\n    } else {\n      createFeedbacks(list);\n    }\n\n    swiperInstance = new Swiper('.swiper', {\n      modules: [Pagination, Navigation],\n      slidesPerView: 1,\n      spaceBetween: 30,\n\n      pagination: {\n        el: '.swiper-pagination',\n        clickable: false,\n        renderBullet: renderCustomBullets,\n      },\n\n      navigation: {\n        nextEl: '.swiper-button-next',\n        prevEl: '.swiper-button-prev',\n      },\n\n      on: { slideChange: handleSlideChange },\n    });\n\n    handleSlideChange(swiperInstance);\n    swiperInstance.update();\n\n    section?.setAttribute('data-state', 'ready');\n    section?.setAttribute('aria-busy', 'false');\n  } catch (err) {\n    toastErrorFeedbacks();\n    renderEmptyState();\n\n    section?.setAttribute('data-state', 'ready');\n    section?.setAttribute('aria-busy', 'false');\n  } finally {\n    hideLoaderFeedback();\n  }\n}\n\nrenderFeedbacks();\n\n// ! ===========================================================================================\n\nfunction renderCustomBullets(index, className) {\n  return index < 3 ? `<span class=\"${className}\"></span>` : '';\n}\n\n// ! ===========================================================================================\n\nfunction handleSlideChange(swiper) {\n  updateNavigationButtons(swiper);\n  updateBullets(swiper);\n}\n\nconst prevBtn = document.querySelector('.swiper-button-prev');\nconst nextBtn = document.querySelector('.swiper-button-next');\nconst bulletsRoot = document.querySelector('.swiper-pagination');\n\nfunction updateNavigationButtons(swiper) {\n  prevBtn.classList.toggle('swiper-button-disabled', swiper.activeIndex === 0);\n  nextBtn.classList.toggle(\n    'swiper-button-disabled',\n    swiper.activeIndex === swiper.slides.length - 1\n  );\n}\n\nfunction updateBullets(swiper) {\n  const bullets = bulletsRoot?.querySelectorAll('span');\n  if (!bullets.length) return;\n\n  bullets.forEach(b => b.classList.remove('swiper-pagination-bullet-active'));\n\n  if (bullets.length === 1) {\n    bullets[0].classList.add('swiper-pagination-bullet-active');\n    return;\n  }\n\n  const isFirst = swiper.activeIndex === 0;\n  const isLast = swiper.activeIndex === swiper.slides.length - 1;\n\n  if (bullets.length >= 3) {\n    (isFirst ? bullets[0] : isLast ? bullets[2] : bullets[1]).classList.add(\n      'swiper-pagination-bullet-active'\n    );\n  } else {\n    (isFirst ? bullets[0] : bullets[1]).classList.add(\n      'swiper-pagination-bullet-active'\n    );\n  }\n}\n\n// ! ===========================================================================================\n\nfunction renderEmptyState() {\n  refs.feedbacksContainer.insertAdjacentHTML(\n    'beforeend',\n    `\n    <div class=\"swiper-slide feedback-card\">\n      <p class=\"feedback-text\">We are waiting for your feedback! Be the first to share your impressions.</p>\n    </div>`\n  );\n  document.querySelector('.swiper-nav')?.classList.add('hidden');\n  document.querySelector('.swiper-pagination')?.classList.add('hidden');\n}\n\n// ! ===========================================================================================\n","/* Artist details modal */\n\nimport { getArtistAlbumsById, getArtistById } from \"./artists-api\";\nimport { toastError } from \"./helpers\";\nimport { refs } from \"./refs\";\n\n\nfunction openModal() {\n    refs.artistDetailsModalBackdrope.classList.add('modal--is-open');\n    document.body.style.overflow = 'hidden';\n    window.addEventListener('keydown', onEcsKeyPress);\n    refs.artistDetailsModalBackdrope.addEventListener('click', onBackdropClick);\n}\n\nfunction closeModal() {\n    refs.artistDetailsModalBackdrope.classList.remove('modal--is-open');\n    document.body.style.overflow = '';\n    window.removeEventListener('keydown', onEcsKeyPress);\n    refs.artistDetailsModalBackdrope.removeEventListener('click', onBackdropClick);\n}\n\nfunction onEcsKeyPress(e) {\n  if (e.key === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction onBackdropClick(e) {\n  if (e.target === refs.artistDetailsModalBackdrope) {\n    closeModal();\n  }\n}\n\nfunction showLoader() {\n    refs.loader?.classList.remove('is-hidden');\n}\n\nfunction hideLoader() {\n    refs.loader?.classList.add('is-hidden');\n}\n\nasync function showArtistDetails(artistId) {\n    \n    try {\n        showLoader();\n        \n        const artist = await getArtistById(artistId);\n        const albumsData = await getArtistAlbumsById(artistId);\n        const albums = albumsData?.albumsList || [];\n        \n        const { \n            intFormedYear, \n            intDiedYear, \n            strArtist, \n            strArtistThumb, \n            strGender, \n            intMembers, \n            strCountry, \n            strBiographyEN, \n            genres,\n        } = artist;\n   \n        let years;\n        if (intFormedYear && intDiedYear) {\n        years = `${intFormedYear} - ${artist.intDiedYear}`;\n        } else if (intFormedYear && !intDiedYear) {\n        years = `${intFormedYear} - present`;\n        } else {\n        years = 'information missing';\n        }\n\n        const formatDuration = ms => {\n            if (!ms || isNaN(ms)) return '';\n            const totalSec = Math.floor(ms / 1000);\n            const min = Math.floor(totalSec / 60);\n            const sec = String(totalSec % 60).padStart(2, '0');\n            return `${min}:${sec}`;\n        };\n\n        const sprite = new URL('../img/icons.svg', import.meta.url).href;\n\n        const markup = `\n        <div class=\"artist-details-modal-content\">\n            <button class=\"artist-details-modal-close-btn\" type=\"button\">\n                <svg class=\"modal-svg\" width=\"32\" height=\"32\">\n                    <use href=\"${sprite}#icon-close\"></use>\n                </svg>\n            </button> \n\n            <h2 class=\"artist-details-modal-main-title\">${strArtist}</h2>\n            <div class=\"artist-details-modal-main-block\">\n                <img class=\"artist-details-modal-img\" src=\"${strArtistThumb}\" alt=\"${artist.name}\" />\n\n                <div class=\"artist-details-modal-info\">\n                <ul class=\"artist-details-modal-list\">\n                <li class=\"artist-details-modal-list-item\">\n                    <h3 class=\"artist-details-modal-title\">Years active</h3>\n                    <p  class=\"artist-details-modal-text\">${years}</p>\n                </li>\n                ${strGender ? `\n                    <li class=\"artist-details-modal-list-item\">\n                        <h3 class=\"artist-details-modal-title\">Sex</h3>\n                        <p class=\"artist-details-modal-text\">${strGender}</p>\n                    </li>\n                    ` : ''}\n                ${intMembers ? `\n                    <li class=\"artist-details-modal-list-item\">\n                        <h3 class=\"artist-details-modal-title\">Members</h3>\n                        <p class=\"artist-details-modal-text\">${intMembers}</p>\n                    </li>\n                    ` : ''}\n                <li class=\"artist-details-modal-list-item\">\n                    <h3 class=\"artist-details-modal-title\">Country</h3>\n                    <p class=\"artist-details-modal-text\">${strCountry}</p>\n                </li>\n                <li class=\"artist-details-modal-list-item\">\n                    <h3 class=\"artist-details-modal-title\">Biography</h3>\n                    <p class=\"artist-details-modal-text\">${strBiographyEN}</p>\n                </li>\n                </ul>\n                \n                ${\n                    Array.isArray(genres) && genres.length\n                      ? `<ul class=\"artist-details-modal-block-genres\">${genres\n                          .map(g => `<li class=\"artist-details-modal-block-genres-item\">${g}</li>`)\n                          .join('')}</ul>`\n                      : ''\n                }\n            </div>\n            </div>\n            <h3 class=\"artist-details-modal-albums\">Albums</h3>\n            <div class=\"artist-details-modal-albums-wrap\">\n            ${albums.length > 0 ? albums.map(album => `\n                <div class=\"artist-details-modal-albums-list\">\n                <h4 class=\"artist-details-modal-albums-list-title\">${album.strAlbum}</h4>\n                <table>\n                <thead class=\"artist-details-modal-albums-list-table-head\">\n                    <tr>\n                    <th class=\"artist-details-modal-albums-list-table col-1\">Track</th>\n                    <th class=\"artist-details-modal-albums-list-table col-2\">Time</th>\n                    <th class=\"artist-details-modal-albums-list-table col-3\">Link</th>\n                    </tr>\n                </thead>\n                <tbody class=\"artist-details-modal-albums-list-table-body\">\n                    ${album.tracks?.map(track => `\n                    <tr>\n                        <td class=\"artist-details-modal-albums-list-table-text col-1\">${track.strTrack}</td>\n                        <td class=\"artist-details-modal-albums-list-table-text col-2\">${formatDuration(track.intDuration)}</td>\n                        <td class= \"col-3\">\n                            ${track.movie && track.movie !== 'null' ? `\n                                <a class=\"modal-link-youtube\" href=\"${track.movie}\" target=\"_blank\">\n                                    <svg class=\"modal-youtube\" width=\"24\" height=\"20\">\n                                        <use href=\"${sprite}#icon-youtube\"></use>\n                                    </svg>\n                                </a>\n                            ` : ''}\n                        </td>\n                    </tr>\n                    `).join('') || ''}\n                </tbody>\n                </table>\n            </div>\n            `).join('') : '<p>No albums found</p>'}\n            </div>\n        </div>\n        `;\n\n\n        refs.artistDetailsModal.innerHTML = `${markup}`;\n\n        const closeBtn = refs.artistDetailsModalBackdrope.querySelector('.artist-details-modal-close-btn');\n        closeBtn.addEventListener('click', closeModal);\n  \n        openModal();\n\n    } catch (err) {\n        toastError(err.message);\n        // console.log(err);\n    } finally {\n        hideLoader();\n    }\n}\n\n\nrefs.artistsList.addEventListener('click', e => {\n    const btn = e.target.closest('.artist-cta');\n    if(!btn) return;\n    \n    const artistId = btn.dataset.artistId;\n    if(artistId) {\n    showArtistDetails(artistId);\n    }\n});\n","import { addNewFeedback } from './artists-api.js';\n\nimport { toastSuccessFeedbacks, toastErrorFeedbacks} from './helpers.js';\n\nimport \"css-star-rating/css/star-rating.css\";\nimport axios from 'axios';   \n\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const backdrop = document.querySelector(\".feedback-backdrop\");\n  const form = document.querySelector(\".feedback-modal-form\");\n  const nameInput = document.getElementById(\"user-name\");\n  const messageInput = document.getElementById(\"user-feedback\");\n  const ratingInput = document.getElementById(\"ratingValue\");\n  const submitBtn = form.querySelector(\".feedback-modal-btn\");\n  const stars = document.querySelectorAll(\".modal-star\");\n  const ratingError = document.getElementById(\"ratingError\");\n\n  function showRatingError(message) {\n    ratingError.textContent = message;\n  }\n\n  function clearRatingError() {\n    ratingError.textContent = \"\";\n  }\n\n  function fillStars(value) {\n    stars.forEach((s, i) => {\n      if (i + 1 <= value) {\n        s.style.background = \"linear-gradient(to right, #764191 100%, #ffffff 100%)\";\n      } else if (i < value) {\n        const fraction = value - i;\n        s.style.background = `linear-gradient(to right, #764191 ${fraction * 100}%, #ffffff ${fraction * 100}%)`;\n      } else {\n        s.style.background = \"linear-gradient(to right, #ffffff 0%, #ffffff 100%)\";\n      }\n    });\n  }\n\n  function updateStars() {\n    const rating = parseFloat(ratingInput.value) || 0;\n    fillStars(rating);\n  }\n\n  stars.forEach((star, idx) => {\n    star.addEventListener(\"mousemove\", (e) => {\n      const rect = star.getBoundingClientRect();\n      const x = e.clientX - rect.left;\n      const percent = x / rect.width;\n      const quarter = Math.ceil(percent * 4) / 4;\n      fillStars(idx + quarter);\n    });\n\n    star.addEventListener(\"click\", (e) => {\n      const rect = star.getBoundingClientRect();\n      const x = e.clientX - rect.left;\n      const percent = x / rect.width;\n      const quarter = Math.ceil(percent * 4) / 4;\n      ratingInput.value = idx + quarter;\n      updateStars();\n      clearRatingError();\n    });\n\n    star.addEventListener(\"mouseleave\", updateStars);\n  });\n\n  const openBtn = document.querySelector(\".leave-feedback-button\");\n  if (openBtn) {\n    openBtn.addEventListener(\"click\", () => {\n      form.reset();\n      ratingInput.value = \"0\";\n      updateStars();\n      clearRatingError();\n      clearError(nameInput);\n      clearError(messageInput);\n      backdrop.classList.add(\"is-open\");\n      document.body.style.overflow = \"hidden\";\n    });\n  }\n\n  const closeModal = () => {\n    backdrop.classList.remove(\"is-open\");\n    document.body.style.overflow = \"\";\n  };\n  document.querySelector(\".feedback-modal-close\").addEventListener(\"click\", closeModal);\n  backdrop.addEventListener(\"click\", e => { if (e.target === backdrop) closeModal(); });\n  document.addEventListener(\"keydown\", e => { if (e.key === \"Escape\") closeModal(); });\n\n  const showError = (input, message) => {\n    let errorEl = input.nextElementSibling;\n    if (!errorEl || !errorEl.classList.contains(\"field-error\")) {\n      errorEl = document.createElement(\"div\");\n      errorEl.classList.add(\"field-error\");\n      input.insertAdjacentElement(\"afterend\", errorEl);\n    }\n    errorEl.textContent = message;\n    input.classList.add(\"input-error\");\n    input.setAttribute(\"aria-invalid\", \"true\");\n  };\n\n  const clearError = input => {\n    let errorEl = input.nextElementSibling;\n    if (errorEl && errorEl.classList.contains(\"field-error\")) errorEl.textContent = \"\";\n    input.classList.remove(\"input-error\");\n    input.removeAttribute(\"aria-invalid\");\n  };\n\n  form.addEventListener(\"submit\", async e => {\n    e.preventDefault();\n    clearError(nameInput);\n    clearError(messageInput);\n    clearRatingError();\n\n    const name = nameInput.value.trim();\n    const message = messageInput.value.trim();\n    const rating = parseFloat(ratingInput.value);\n\n    let hasError = false;\n\n    if (name.length < 2 || name.length > 16) {\n      showError(nameInput, \"Name must be between 2 and 16 characters\");\n      hasError = true;\n    }\n\n    if (message.length < 10 || message.length > 512) {\n      showError(messageInput, \"Message must be between 10 and 512 characters\");\n      hasError = true;\n    }\n\n    if (rating < 0.25 || rating > 5) {\n      showRatingError(\"Please provide a rating between 0.25 and 5\");\n      hasError = true;\n    }\n\n    if (hasError) return;\n\n    submitBtn.disabled = true;\n\n    try {\n      await addNewFeedback(name, rating, message);\n      toastSuccessFeedbacks(\"Thank you! Your feedback has been submitted.\");\n      form.reset();\n      ratingInput.value = \"0\";\n      updateStars();\n      closeModal();\n    } catch (err) {\n      toastErrorFeedbacks(\"Server error: \" + (err.response?.data?.message || err.message));\n    } finally {\n      submitBtn.disabled = false;\n    }\n  });\n\n  updateStars();\n});\n","const scrollBtn = document.querySelector('.scroll-to-top');\n\nlet lastScroll = window.scrollY;\nlet isVisible = false;\nlet scrollTimeout;\nlet hideTimeout;\n\nwindow.addEventListener('scroll', () => {\n  clearTimeout(scrollTimeout);\n\n  scrollTimeout = setTimeout(() => {\n    const currentScroll = window.scrollY;\n    const scrollingUp = currentScroll < lastScroll - 70;\n    const scrolledToBottom =\n      window.innerHeight + currentScroll >= document.body.offsetHeight - 10;\n\n    const shouldShow = scrolledToBottom || (scrollingUp && currentScroll > 350);\n\n    if (shouldShow && !isVisible) {\n      scrollBtn.classList.add('visible');\n      isVisible = true;\n\n      clearTimeout(hideTimeout);\n      hideTimeout = setTimeout(() => {\n        scrollBtn.classList.remove('visible');\n        isVisible = false;\n      }, 3700);\n    } else if (!shouldShow && isVisible) {\n      scrollBtn.classList.remove('visible');\n      isVisible = false;\n      clearTimeout(hideTimeout);\n    }\n\n    lastScroll = currentScroll;\n  }, 70);\n});\n\nscrollBtn.addEventListener('click', () => {\n  window.scrollTo({ top: 0, behavior: 'smooth' });\n});\n"],"names":["refs","BASE_URL","API_ENDPOINTS","ARTISTS_PER_PAGE","FEEDBACKS_PER_QUEUE","toastError","message","position","iziToast","toastSuccess","icon","toastErrorFeedbacks","toastSuccessFeedbacks","hideLoaderArtists","showLoaderArtists","hideLoaderFeedback","_a","_b","_c","_d","showLoaderFeedback","toggleBtn","mobileMenu","menuLinks","openMenu","closeMenu","link","axios","getArtists","page","data","getArtistById","id","getArtistAlbumsById","getFeedbacks","getGenres","searchArtist","name","sorted","genre","addNewFeedback","rating","descr","timeLines","gsap","query","initGenresMarkup","initSearchAndFilters","initSearchRequest","initSort","initGenres","initReset","execHeroBtnClick","helpClearHoverOnButtons","handleSearchBtnRequest","artists","renderArtists","err","e","markup","outsideClickHandler","item","handleResetQuery","btn","isMobile","visiblePages","pager","inFlight","skipScrollOnce","suppressExternalNormalize","noArtistsMarkup","ensureNoArtistsBlock","el","showNoArtists","hideNoArtists","togglePager","visible","totalItems","box","isSearchActive","ensurePager","total","Pagination","handlePagerMove","normalizeAndMovePager","totalPages","target","loadArtists","init","payload","totalArtists","next","nextArtists","nextTotal","smartScrollAfterRender","sprite","_id","strArtist","strArtistThumb","strBiographyEN","genres","img","tagsHtml","g","scrollToArtistsTop","anchor","offset","targetY","reduced","scrollAfterImages","container","images","loaded","done","FILTERS_STICKY_TOP","filtersState","getColumnsCount","listEl","cols","absTop","r","enableFiltersFollow","onScrollFiltersFollow","scheduleFiltersRaf","recomputeFiltersBounds","disableFiltersFollow","panel","rawShift","clamped","list","firstTop","lastRowFirstIndex","lastRowTop","MAX_STARS","ratingMarkup","cls","ratingClasses","aria","clamp01to5","renderStars","feedbackTemplate","createFeedbacks","feedbacks","x","n","val","full","hasHalf","value","maxStars","_","i","renderStar","type","starSvg","swiperInstance","renderFeedbacks","section","fontsReady","resp","renderEmptyState","Swiper","Navigation","renderCustomBullets","handleSlideChange","index","className","swiper","updateNavigationButtons","updateBullets","prevBtn","nextBtn","bulletsRoot","bullets","b","isFirst","isLast","openModal","onEcsKeyPress","onBackdropClick","closeModal","showLoader","hideLoader","showArtistDetails","artistId","artist","albumsData","albums","intFormedYear","intDiedYear","strGender","intMembers","strCountry","years","formatDuration","ms","totalSec","min","sec","album","track","backdrop","form","nameInput","messageInput","ratingInput","submitBtn","stars","ratingError","showRatingError","clearRatingError","fillStars","s","fraction","updateStars","star","idx","rect","percent","quarter","openBtn","clearError","showError","input","errorEl","hasError","scrollBtn","lastScroll","isVisible","scrollTimeout","hideTimeout","currentScroll","scrollingUp","shouldShow"],"mappings":"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"}