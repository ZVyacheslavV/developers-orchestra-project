{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/constants.js","../src/js/storage.js","../src/js/artists-api.js","../src/js/artists.js","../src/js/artists-additional.js"],"sourcesContent":["/* Refs */\nexport const refs = {\n  artistsList: document.querySelector('#artists-list'),\n};\n","/* Constants */\nexport const BASE_URL = 'https://sound-wave.b.goit.study/api';\nexport const API_ENDPOINTS = {\n  ARTISTS: '/artists',\n  ARTIST_BY_ID: '/artists/',\n  ARTIST_ALBUMS_BY_ID: '/albums',\n\n  GENRES: '/genres',\n\n  FEEDBACKS: '/feedbacks',\n  PRODUCTS_BY_CATEGORY: '/products/category/',\n};\nexport const ARTISTS_PER_PAGE = 8;\nexport const FEEDBACKS_PER_QUEUE = 10;\n","/* Storage */\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const page = { currentPage: 1 };\n\nexport function getFromLS(key) {\n  try {\n    const jsonData = localStorage.getItem(key);\n    return jsonData ? JSON.parse(jsonData) : null;\n  } catch {\n    iziToast.error({\n      message: `Error during loading from LS for key \"${key}\": ${err}`,\n    });\n    return null;\n  }\n}\n\nexport function saveToLS(key, value) {\n  try {\n    localStorage.setItem(key, JSON.stringify(value));\n  } catch (err) {\n    iziToast.error(`Error during saving to LS: ${err}`);\n  }\n}\n","/* Backend api */\nimport axios from 'axios';\nimport {\n  API_ENDPOINTS,\n  ARTISTS_PER_PAGE,\n  BASE_URL,\n  FEEDBACKS_PER_QUEUE,\n} from './constants';\n\naxios.defaults.baseURL = BASE_URL;\n\nexport const getArtists = async page => {\n  const { data } = await axios.get(\n    `${API_ENDPOINTS.ARTISTS}?limit=${ARTISTS_PER_PAGE}&page=${page}`\n  );\n  return data;\n};\n\nexport const getArtistById = async id => {\n  const { data } = await axios.get(`${API_ENDPOINTS.ARTIST_BY_Id}${id}`);\n  return data;\n};\n\nexport const getArtistAlbumsById = async id => {\n  const { data } = await axios.get(\n    `${API_ENDPOINTS.ARTIST_BY_Id}${id}${API_ENDPOINTS.ARTIST_ALBUMS_BY_ID}`\n  );\n  return data;\n};\n\nexport const getFeedbacks = async (page = 1) => {\n  const { data } = await axios.get(\n    `${API_ENDPOINTS.FEEDBACKS}?limit=${FEEDBACKS_PER_QUEUE}&page=${page}`\n  );\n  return data;\n};\n\nexport const getGenres = async () => {\n  const { data } = await axios.get(`${API_ENDPOINTS.GENRES}`);\n  return data;\n};\n\nexport const searchArtist = async (query, page = 1, sorted = 0, genre = '') => {\n  const { data } = await axios.get(\n    `${\n      API_ENDPOINTS.ARTISTS\n    }?limit=${ARTISTS_PER_PAGE}&page=${page}&name=${query}${\n      sorted === 2 ? `&sortName=desc` : sorted === 1 ? `&sortName=asc` : ''\n    }${genre ? `&genre=${genre}` : ''}`\n  );\n  return data;\n};\n\nexport const addNewFeedback = async (name, rating, descr /* , closeFunc */) => {\n  await axios.post(`${API_ENDPOINTS.FEEDBACKS}`, {\n    name,\n    rating,\n    descr,\n  });\n};\n","/* Artists */\n\nimport { getArtists } from './artists-api.js';\nimport { refs } from './refs.js';\nimport { page } from './storage.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nfunction toastError(message) {\n  iziToast.error({ title: 'Error', message });\n}\n\nexport async function loadArtists() {\n  try {\n    const { artists } = await getArtists(page.currentPage);\n    renderArtists(artists);\n  } catch {\n    toastError('Failed to fetch artists');\n  }\n}\n\nexport function renderArtists(artists = []) {\n  const markup = artists\n    .map(\n      ({\n        _id,\n        strArtist = 'Unknown',\n        strArtistThumb,\n        strBiographyEN = '',\n        genres = [],\n      }) => {\n        const img =\n          strArtistThumb || 'https://placehold.co/736x414?text=No+Image';\n\n        return `\n            <li class=\"artists-item\">\n              <div class=\"artist-card\" data-id=\"${_id}\">\n                <img\n                  src=\"${img}\"\n                  alt=\"${strArtist} — portrait\"\n                  class=\"artist-img\"\n                  loading=\"lazy\"\n                  decoding=\"async\"\n                  width=\"736\" height=\"414\"\n                >\n                ${\n                  Array.isArray(genres) && genres.length\n                    ? `<ul class=\"artist-tags\">${genres\n                        .map(g => `<li class=\"tag\">${g}</li>`)\n                        .join('')}</ul>`\n                    : ''\n                }\n\n                <h3 class=\"artist-name\">${strArtist}</h3>\n                ${\n                  strBiographyEN\n                    ? `<p class=\"artist-desc text-clamp-3\">${strBiographyEN}</p>`\n                    : ''\n                }\n\n                <button class=\"artist-cta\" type=\"button\" aria-label=\"Learn more about ${strArtist}\">\n                  Learn More\n                </button>\n              </div>\n            </li>`;\n      }\n    )\n    .join('');\n\n  refs.artistsList.insertAdjacentHTML('beforeend', markup);\n}\n\nloadArtists();\n","/* Artists additional */\nimport iziToast from 'izitoast';\nimport { getGenres } from './artists-api';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const initArtistsFilter = async () => {\n  try {\n    const genres = await getGenres();\n    const menu = document.querySelector('.dropdown-menu');\n\n    const markup =\n      '<li data-value=\"all\">All Genres</li>' +\n      genres\n        .map(\n          ({ genre }) => `<li data-value=\"${genre.toLowerCase()}\">${genre}</li>`\n        )\n        .join('');\n    menu.insertAdjacentHTML('beforeend', markup);\n  } catch (err) {\n    iziToast.error({ message: `Error while loading genres ${err}` });\n  }\n};\n\ndocument.querySelectorAll('.dropdown').forEach(dropdown => {\n  const toggle = dropdown.querySelector('.dropdown-toggle');\n  const menu = dropdown.querySelector('.dropdown-menu');\n\n  toggle.addEventListener('click', () => {\n    menu.style.display = menu.style.display === 'block' ? 'none' : 'block';\n  });\n\n  menu.querySelectorAll('li').forEach(item => {\n    item.addEventListener('click', () => {\n      toggle.textContent = item.textContent;\n      toggle.dataset.value = item.dataset.value;\n      menu.style.display = 'none';\n    });\n  });\n\n  // закриваємо, якщо клік поза дропдауном\n  document.addEventListener('click', e => {\n    if (!dropdown.contains(e.target)) {\n      menu.style.display = 'none';\n    }\n  });\n});\n"],"names":["refs","BASE_URL","API_ENDPOINTS","ARTISTS_PER_PAGE","page","axios","getArtists","data","toastError","message","iziToast","loadArtists","artists","renderArtists","markup","_id","strArtist","strArtistThumb","strBiographyEN","genres","g","dropdown","toggle","menu","item","e"],"mappings":"6vBACO,MAAMA,EAAO,CAClB,YAAa,SAAS,cAAc,eAAe,CACrD,ECFaC,EAAW,sCACXC,EAAgB,CAC3B,QAAS,WACT,aAAc,YACd,oBAAqB,UAErB,OAAQ,UAER,UAAW,aACX,qBAAsB,qBACxB,EACaC,EAAmB,ECRnBC,EAAO,CAAE,YAAa,CAAG,ECKtCC,EAAM,SAAS,QAAUJ,EAElB,MAAMK,EAAa,MAAMF,GAAQ,CACtC,KAAM,CAAE,KAAAG,CAAI,EAAK,MAAMF,EAAM,IAC3B,GAAGH,EAAc,OAAO,UAAUC,CAAgB,SAASC,CAAI,EACnE,EACE,OAAOG,CACT,ECRA,SAASC,EAAWC,EAAS,CAC3BC,EAAS,MAAM,CAAE,MAAO,QAAS,QAAAD,CAAS,CAAA,CAC5C,CAEO,eAAeE,GAAc,CAClC,GAAI,CACF,KAAM,CAAE,QAAAC,CAAO,EAAK,MAAMN,EAAWF,EAAK,WAAW,EACrDS,EAAcD,CAAO,CACzB,MAAU,CACNJ,EAAW,yBAAyB,CACrC,CACH,CAEO,SAASK,EAAcD,EAAU,GAAI,CAC1C,MAAME,EAASF,EACZ,IACC,CAAC,CACC,IAAAG,EACA,UAAAC,EAAY,UACZ,eAAAC,EACA,eAAAC,EAAiB,GACjB,OAAAC,EAAS,CAAE,CACnB,IAIe;AAAA;AAAA,kDAEmCJ,CAAG;AAAA;AAAA,yBAJ3CE,GAAkB,4CAMA;AAAA,yBACHD,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAOhB,MAAM,QAAQG,CAAM,GAAKA,EAAO,OAC5B,2BAA2BA,EACxB,IAAIC,GAAK,mBAAmBA,CAAC,OAAO,EACpC,KAAK,EAAE,CAAC,QACX,EACL;AAAA;AAAA,0CAEyBJ,CAAS;AAAA,kBAEjCE,EACI,uCAAuCA,CAAc,OACrD,EACL;AAAA;AAAA,wFAEuEF,CAAS;AAAA;AAAA;AAAA;AAAA,kBAM5F,EACA,KAAK,EAAE,EAEVhB,EAAK,YAAY,mBAAmB,YAAac,CAAM,CACzD,CAEAH,EAAa,ECjDb,SAAS,iBAAiB,WAAW,EAAE,QAAQU,GAAY,CACzD,MAAMC,EAASD,EAAS,cAAc,kBAAkB,EAClDE,EAAOF,EAAS,cAAc,gBAAgB,EAEpDC,EAAO,iBAAiB,QAAS,IAAM,CACrCC,EAAK,MAAM,QAAUA,EAAK,MAAM,UAAY,QAAU,OAAS,OACnE,CAAG,EAEDA,EAAK,iBAAiB,IAAI,EAAE,QAAQC,GAAQ,CAC1CA,EAAK,iBAAiB,QAAS,IAAM,CACnCF,EAAO,YAAcE,EAAK,YAC1BF,EAAO,QAAQ,MAAQE,EAAK,QAAQ,MACpCD,EAAK,MAAM,QAAU,MAC3B,CAAK,CACL,CAAG,EAGD,SAAS,iBAAiB,QAASE,GAAK,CACjCJ,EAAS,SAASI,EAAE,MAAM,IAC7BF,EAAK,MAAM,QAAU,OAE3B,CAAG,CACH,CAAC"}